{"ast":null,"code":"import API from '../../API';\nimport { addFavourites, deleteFavourites, fetchFavourites } from \"./actions\";\nconst api = new API();\nconst FAVOURITES_KEY = 'FAVOURITES_KEY';\nexport const add_Favourite = place => {\n  console.log(\" is the movie added :\", place);\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    const nextFavorites = [place, ...prevFavourites];\n    setToLocalStorage(nextFavorites);\n    console.log(\" what is set to local storage:\", nextFavorites);\n    dispatch(addFavourites(nextFavorites));\n  };\n};\nexport const delete_Favourite = id => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    const nextFavourites = prevFavourites.filter(image => image.id != id); // const nextFavourites = [place, ...prevFavourites];\n\n    setToLocalStorage(nextFavourites);\n    dispatch(deleteFavourites(nextFavourites));\n  };\n};\nexport const fetchFromLocalStorage = () => {\n  return async dispatch => {\n    let favouritesJSON = localStorage.getItem(FAVOURITES_KEY);\n    let favourites = [];\n\n    if (favouritesJSON) {\n      favourites = JSON.parse(favouritesJSON);\n    }\n\n    dispatch(fetchFavourites(favourites));\n  };\n};\n\nconst setToLocalStorage = favourites => {\n  localStorage.setItem(FAVOURITES_KEY, JSON.stringify(favourites));\n};","map":{"version":3,"sources":["C:/Users/arcstudent/Desktop/New folder (3)/techis-wd-forum-django-react/frontend/src/reducks/favourites/operations.js"],"names":["API","addFavourites","deleteFavourites","fetchFavourites","api","FAVOURITES_KEY","add_Favourite","place","console","log","dispatch","getState","prevFavourites","favourites","list","nextFavorites","setToLocalStorage","delete_Favourite","id","nextFavourites","filter","image","fetchFromLocalStorage","favouritesJSON","localStorage","getItem","JSON","parse","setItem","stringify"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,WAAhB;AACA,SAAQC,aAAR,EAAsBC,gBAAtB,EAAuCC,eAAvC,QAA6D,WAA7D;AAEE,MAAMC,GAAG,GAAG,IAAIJ,GAAJ,EAAZ;AACA,MAAMK,cAAc,GAAG,gBAAvB;AAEF,OAAO,MAAMC,aAAa,GAAGC,KAAK,IAAI;AAChCC,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAoCF,KAApC;AACF,SAAO,OAAOG,QAAP,EAAiBC,QAAjB,KAA8B;AACjC,QAAIC,cAAc,GAAGD,QAAQ,GAAGE,UAAX,CAAsBC,IAA3C;AACA,UAAMC,aAAa,GAAG,CAACR,KAAD,EAAQ,GAAGK,cAAX,CAAtB;AAEAI,IAAAA,iBAAiB,CAACD,aAAD,CAAjB;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA6CM,aAA7C;AACAL,IAAAA,QAAQ,CAACT,aAAa,CAACc,aAAD,CAAd,CAAR;AACH,GAPD;AAQH,CAVM;AAYP,OAAO,MAAME,gBAAgB,GAAGC,EAAE,IAAI;AAClC,SAAO,OAAOR,QAAP,EAAiBC,QAAjB,KAA8B;AACjC,QAAIC,cAAc,GAAGD,QAAQ,GAAGE,UAAX,CAAsBC,IAA3C;AACA,UAAMK,cAAc,GAAGP,cAAc,CAACQ,MAAf,CAAsBC,KAAK,IAAIA,KAAK,CAACH,EAAN,IAAYA,EAA3C,CAAvB,CAFiC,CAIjC;;AACAF,IAAAA,iBAAiB,CAACG,cAAD,CAAjB;AACAT,IAAAA,QAAQ,CAACR,gBAAgB,CAACiB,cAAD,CAAjB,CAAR;AACH,GAPD;AAQH,CATM;AAWL,OAAO,MAAMG,qBAAqB,GAAE,MAAI;AACtC,SAAO,MAAMZ,QAAN,IAAkB;AACrB,QAAIa,cAAc,GAAGC,YAAY,CAACC,OAAb,CAAqBpB,cAArB,CAArB;AACA,QAAIQ,UAAU,GAAG,EAAjB;;AACA,QAAGU,cAAH,EAAkB;AACdV,MAAAA,UAAU,GAAGa,IAAI,CAACC,KAAL,CAAWJ,cAAX,CAAb;AAEH;;AACDb,IAAAA,QAAQ,CAACP,eAAe,CAACU,UAAD,CAAhB,CAAR;AACL,GARC;AASD,CAVM;;AAWP,MAAMG,iBAAiB,GAAGH,UAAU,IAAG;AACnCW,EAAAA,YAAY,CAACI,OAAb,CAAqBvB,cAArB,EAAoCqB,IAAI,CAACG,SAAL,CAAehB,UAAf,CAApC;AACH,CAFD","sourcesContent":["import API from '../../API';\r\nimport {addFavourites,deleteFavourites,fetchFavourites} from \"./actions\"\r\n  \r\n  const api = new API();\r\n  const FAVOURITES_KEY = 'FAVOURITES_KEY';\r\n\r\nexport const add_Favourite = place => {\r\n      console.log(\" is the movie added :\",place);\r\n    return async (dispatch, getState) => {        \r\n        let prevFavourites = getState().favourites.list;         \r\n        const nextFavorites = [place, ...prevFavourites];\r\n        \r\n        setToLocalStorage(nextFavorites);\r\n        console.log(\" what is set to local storage:\",nextFavorites);\r\n        dispatch(addFavourites(nextFavorites));\r\n    };\r\n};\r\n\r\nexport const delete_Favourite = id => {\r\n    return async (dispatch, getState) => {\r\n        let prevFavourites = getState().favourites.list;\r\n        const nextFavourites = prevFavourites.filter(image => image.id != id);\r\n        \r\n        // const nextFavourites = [place, ...prevFavourites];\r\n        setToLocalStorage(nextFavourites);\r\n        dispatch(deleteFavourites(nextFavourites));\r\n    };\r\n};\r\n\r\n  export const fetchFromLocalStorage =()=>{\r\n    return async dispatch => {\r\n        let favouritesJSON = localStorage.getItem(FAVOURITES_KEY);\r\n        let favourites = [];\r\n        if(favouritesJSON){\r\n            favourites = JSON.parse(favouritesJSON);\r\n\r\n        }\r\n        dispatch(fetchFavourites(favourites));\r\n  };\r\n  }\r\n  const setToLocalStorage = favourites =>{\r\n      localStorage.setItem(FAVOURITES_KEY,JSON.stringify(favourites));\r\n  }\r\n\r\n"]},"metadata":{},"sourceType":"module"}